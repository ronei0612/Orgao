var _somSolo,_tempo=90;const ritmosNomes=Object.keys(ritmosJson);function setBeats(e){"6/8"===e?measureLength.value=24:"3/4"===e||"Valsa"===e?measureLength.value=12:measureLength.value=16,measureLength.dispatchEvent(eventoChange)}function selecionarRitmo(e,a=!1){if(_trocarRitmo&&e&&void 0!==e){_viradaRitmo=fazerViradaBateria(_ritmoSelecionado),!1===a&&(_trocarRitmo=!1);try{var t=e;if(e.includes("_")&&(t=e.split("_")[0]),"null"!=t){setBeats(t);var n=document.getElementById("tracker-table"),i=document.getElementsByClassName("tracker-enabled");Array.from(i).forEach(e=>{e.classList.remove("tracker-enabled")});var r=n.getElementsByTagName("td");ritmosJson[e].forEach(e=>{r[e].classList.add("tracker-enabled")})}}catch{}}mudarTempoCompasso()}function mudarTempoCompasso(e){e?(_tempo=parseInt(bpmRange.value),bpm.value=bpmRange.value):(_tempo=parseInt(bpm.value),bpmRange.value=bpm.value);let a=6e4/_tempo;"6/8"===selectRitmo.value&&(a/=2),lightCompasso.style.animation="blink "+a+"ms infinite"}function fazerViradaBateria(e){return e+"_fill"}function fecharChimbal(e,a,t){("chimbal"===e||"chimbal2"===e)&&_chimbalIsAberto&&(a.stop(t),_chimbalIsAberto=!1)}function pararBaixo(e){_sourceBaixo&&_sourceBaixo.stop()}function guardarChimbalAberto(e,a){"aberto"===e&&(_sourceChimbalAberto=a,_chimbalIsAberto=!0)}function guardarBaixo(e){_sourceBaixo=e}function mudarRitmo(e){_trocarRitmo=!0,selecionarRitmo(_ritmoSelecionado=""===e?selectRitmo.value:selectRitmo.value+"_"+e)}function gerarRitmosNomes(e){if(selectRitmo.innerHTML="","orgao"===_instrumentoSelecionado){for(var a=0,t=e.length;a<t;a++)if(e[a].includes("/")&&!e[a].includes("_")){let n=document.createElement("option");n.value=e[a],n.textContent+=e[a],selectRitmo.appendChild(n)}}else for(var a=0,t=e.length;a<t;a++)if(!e[a].includes("_")){let i=document.createElement("option");i.value=e[a],i.textContent+=e[a],selectRitmo.appendChild(i)}}function verificarETocarBateria_2(e,a){if("none"===iconVolumeMute.style.display)return"none"!==tunerDiv.style.display&&(e?(!1===autoTunerCheck.checked&&(autoTunerCheck.checked=!0),_instrumentoSelecionado=a,_acordeAntesSelecionado=verificarAcompanhamentoEtocar(notaTuner.innerText,_acordeAntesSelecionado),autoTunerCheck.dispatchEvent(eventoChange)):autoTunerCheck.checked&&(pararOsAcordes(),autoTunerCheck.checked=!1,autoTunerCheck.dispatchEvent(eventoChange))),!0}function playGuitarra(){if(stopGuitarra(),_guitarraSelecionado&&_acordeNotas){let e=_acordeNotas;primeiraGuitar.frequency=notasFrequencias[e[0].replace("#","_")],quintaGuitar.frequency=notasFrequencias[e[2].replace("#","_")+"1"],primeiraGuitar.play(),quintaGuitar.play(),_guitarraParado=!1}}function stopGuitarra(e){(!_guitarraParado||e)&&(primeiraGuitar.stop(),quintaGuitar.stop(),_guitarraParado=!0)}